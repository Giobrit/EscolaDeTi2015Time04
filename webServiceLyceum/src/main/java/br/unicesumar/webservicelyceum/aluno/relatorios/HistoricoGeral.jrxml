<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="HistoricoGeral" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="1c7bcd1b-7c2e-4255-bb54-814983c0cbc6">
	<property name="ireport.zoom" value="1.024520183047606"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Diciplina" uuid="15b933cb-1b27-4b7b-90c2-c07a847e9e19">
		<parameter name="RA" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA["13097572"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
     CONCAT(disciplina.codigo,'   ',disciplina.nome) AS disciplina,
     (SELECT
         CONCAT(turma.codigo,turma.serie,'-',SUBSTRING(turma.turno FROM 1 FOR 1),'-',SUBSTRING(turma.situacao FROM 1 FOR 1))
	 FROM
         turma INNER JOIN aluno ON aluno.idturma = turma.id
      WHERE
         aluno.ra = '13097572'
     ) AS turma,
     (SELECT
     	CONCAT(DATE_PART('YEAR',turma.anoinicio),'/',DATE_PART('MONTH', turma.anoinicio))
      FROM
          turma INNER JOIN aluno ON aluno.idturma = turma.id
      WHERE
          aluno.ra = '13097572'
     )AS anosemestre,
     disciplina.cargahoraria AS cargahoraria,
     notasalunodisciplina.mediacalculada AS nota,
     notasalunodisciplina.frequencia AS frequencia,
     notasalunodisciplina.situacao AS situacao
FROM
	notasalunodisciplina INNER JOIN disciplina ON disciplina.id = notasalunodisciplina.iddisciplina]]>
		</queryString>
		<field name="disciplina" class="java.lang.String"/>
		<field name="turma" class="java.lang.String"/>
		<field name="anosemestre" class="java.lang.String"/>
		<field name="cargahoraria" class="java.lang.Double"/>
		<field name="nota" class="java.lang.Double"/>
		<field name="frequencia" class="java.lang.Double"/>
		<field name="situacao" class="java.lang.String"/>
	</subDataset>
	<parameter name="RA" class="java.lang.String">
		<defaultValueExpression><![CDATA["13097572"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select
     curso.unidade AS unidade,
     CONCAT(curso.codigo,' - ',curso.nome) AS curso,
     CONCAT(aluno.ra,' - ',aluno.nome) AS aluno,
     CONCAT(curso.codigo,'_',SUBSTRING(aluno.periodo FROM 1 FOR 1),'_',DATE_PART('YEAR', aluno.anoinicio)) AS curriculo,
     aluno.situacao AS situacao
FROM
     curso INNER JOIN aluno ON curso.id = aluno.idcurso
WHERE aluno.ra = $P{RA}]]>
	</queryString>
	<field name="unidade" class="java.lang.String"/>
	<field name="curso" class="java.lang.String"/>
	<field name="aluno" class="java.lang.String"/>
	<field name="curriculo" class="java.lang.String"/>
	<field name="situacao" class="java.lang.String"/>
	<variable name="variable1" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="117" splitType="Stretch">
			<staticText>
				<reportElement x="485" y="1" width="317" height="20" uuid="74027fc7-ee91-4bea-8dcd-3f35814cebce"/>
				<textElement>
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[Histórico Geral - Disciplinas Cursadas]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="20" width="802" height="1" uuid="97346c31-4ff9-4b94-bd0c-4ff03b4134d5"/>
			</line>
			<staticText>
				<reportElement x="0" y="21" width="68" height="16" uuid="79c44d84-9163-4ffd-9f0b-1348760dd963"/>
				<textElement>
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[UNIDADE:]]></text>
			</staticText>
			<textField>
				<reportElement x="68" y="21" width="332" height="16" uuid="78ea118b-2ee0-4810-a268-b5ca5d85834e"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{unidade}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="68" y="37" width="332" height="18" uuid="945f875a-26ea-4aed-87d3-7023b953ca7c"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{curso}.toUpperCase()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="37" width="68" height="18" uuid="64c417bd-4028-4eb5-bed2-356c6163bd87"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[CURSO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="70" width="68" height="20" uuid="3bf87585-b800-4415-ac85-724a95ac5bae"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ALUNO:]]></text>
			</staticText>
			<textField>
				<reportElement x="68" y="70" width="332" height="20" uuid="b25ab911-5177-47ec-9a22-b4f56eb5a9d9"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{aluno}.toUpperCase()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="90" width="68" height="20" uuid="a242fca5-9578-4b5b-a3a5-a71d2c3f0d22"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[CURRICULO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="212" y="90" width="100" height="20" uuid="d91b3df6-b991-4783-836b-724b0cc66024"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[SITUAÇÃO ALUNO:]]></text>
			</staticText>
			<textField>
				<reportElement x="68" y="90" width="144" height="20" uuid="5c6f1540-16bb-4370-855e-0ce513778a2f"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{curriculo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="312" y="90" width="100" height="20" uuid="b9060d88-32cc-42e4-9c5f-fda860a14621"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{situacao}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="22" splitType="Stretch">
			<line>
				<reportElement x="0" y="20" width="802" height="1" uuid="53db665f-962a-4556-8907-149e553cae8e"/>
			</line>
			<staticText>
				<reportElement x="2" y="0" width="331" height="20" uuid="f69b66ae-c003-4243-829f-209c7a0448ac"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Disciplina]]></text>
			</staticText>
			<staticText>
				<reportElement x="282" y="0" width="100" height="20" uuid="224a0843-0cf8-4387-bd26-6bc8493e2f69"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Turma]]></text>
			</staticText>
			<staticText>
				<reportElement x="389" y="0" width="89" height="20" uuid="68429294-14c2-4616-8b24-9640e147e946"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[AnoSemestre]]></text>
			</staticText>
			<staticText>
				<reportElement x="478" y="0" width="60" height="20" uuid="5ecbc38b-4991-4927-8d68-819ebfb2e74d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[C.H]]></text>
			</staticText>
			<staticText>
				<reportElement x="540" y="0" width="58" height="20" uuid="e805d460-9873-4c70-bd1d-e4f853850551"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Nota]]></text>
			</staticText>
			<staticText>
				<reportElement x="599" y="0" width="73" height="20" uuid="5286bef2-3ef2-4da0-a004-1c851f4e3dbc"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Frequência]]></text>
			</staticText>
			<staticText>
				<reportElement x="673" y="0" width="64" height="20" uuid="32799d6c-9610-469c-bf75-315a640e198c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Situação]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="132" splitType="Stretch">
			<componentElement>
				<reportElement key="table 1" x="0" y="3" width="802" height="118" uuid="1f173e6e-04f3-47d9-b8e3-c408038355b4"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="Diciplina" uuid="d859fe0b-cee1-47ae-b3cd-701e537c6bf9">
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="308" uuid="55c88ae6-064c-472f-8a90-a5cc18b1ee8b">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="308" height="17" uuid="cc6452ef-cff5-40e4-8284-7576f4a6d356"/>
								<textElement verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{disciplina}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="86" uuid="1e6c33f8-daf8-4859-9324-dc9a1fb81472">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="86" height="17" uuid="c5accbef-c384-44dd-8495-8e0b06ee82d0"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{turma}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="79" uuid="0d719ac9-0035-4911-859d-406edb5a41be">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="79" height="17" uuid="f2cda784-1364-4df8-9742-d014a46d7f0f"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{anosemestre}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="67" uuid="ba583edf-f154-46b7-ac82-882903d10dc6">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="66" height="17" uuid="5e7997bf-587b-4d67-a70f-062cc5201238"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{cargahoraria}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="61" uuid="41f16438-dd8a-4773-a9c4-4b27254efd33">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="1" y="0" width="60" height="17" uuid="78147eef-272f-4696-a5f6-4ea5c241780a"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{nota}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="62" uuid="ccab7363-9932-4bea-8c92-7790de9fa80e">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="60" height="17" uuid="73797157-9ec3-4212-a1a5-4753652ae3aa"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{frequencia}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="f04c0341-6be4-4ca5-af10-fa36ae278545">
						<jr:tableHeader height="2" rowSpan="1"/>
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:detailCell height="17" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="17" uuid="b47dfc08-b3d9-4719-829c-5ec36ba15539"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$F{situacao}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</detail>
	<columnFooter>
		<band height="2" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="109" splitType="Stretch"/>
	</summary>
</jasperReport>
