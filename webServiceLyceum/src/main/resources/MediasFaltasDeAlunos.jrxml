<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MediasFaltasDeAlunos" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="e05e1ff8-e171-426d-8c1f-fec9b868bd4e">
	<property name="ireport.zoom" value="1.210000000000001"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="disciplinas" uuid="c15882d6-8f12-4fdb-8e29-8fa80d6e6aa1">
		<parameter name="ra" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
     CONCAT(disciplina."codigo",' - ',disciplina."nome") AS disciplina,
     notasalunodisciplina.situacao AS situacao_disciplina,
     notasalunodisciplina.resultadoparcial AS resultado_parcial,
     notasalunodisciplina.bimestre1 ,
     notasalunodisciplina.bimestre2 ,
     notasalunodisciplina.sub1 ,
     notasalunodisciplina.bimestre3 ,
     notasalunodisciplina.bimestre4 ,
     notasalunodisciplina.sub2 ,
     notasalunodisciplina.mediacalculada ,
     notasalunodisciplina.medialyceum ,
     notasalunodisciplina.notaquefalta ,
     notasalunodisciplina.totalfaltas,
     notasalunodisciplina.aulasdadas,
     notasalunodisciplina.frequencia ,
     notasalunodisciplina.situacaodisciplina AS situacao_aluno
FROM
   aluno INNER JOIN  notasalunodisciplina ON aluno.id = notasalunodisciplina.idaluno
   INNER JOIN disciplina ON notasalunodisciplina.iddisciplina = disciplina.id
WHERE
   aluno.ra = $P{ra}]]>
		</queryString>
		<field name="disciplina" class="java.lang.String"/>
		<field name="situacao_disciplina" class="java.lang.String"/>
		<field name="resultado_parcial" class="java.lang.String"/>
		<field name="bimestre1" class="java.lang.Double"/>
		<field name="bimestre2" class="java.lang.Double"/>
		<field name="sub1" class="java.lang.Double"/>
		<field name="bimestre3" class="java.lang.Double"/>
		<field name="bimestre4" class="java.lang.Double"/>
		<field name="sub2" class="java.lang.Double"/>
		<field name="mediacalculada" class="java.lang.Double"/>
		<field name="medialyceum" class="java.lang.Double"/>
		<field name="notaquefalta" class="java.lang.Double"/>
		<field name="totalfaltas" class="java.lang.Integer"/>
		<field name="aulasdadas" class="java.lang.Integer"/>
		<field name="frequencia" class="java.lang.Double"/>
		<field name="situacao_aluno" class="java.lang.String"/>
	</subDataset>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/home/rodrigo/repositorio/tcc/escoladeti2015time04/webServiceLyceum/src/main/java/br/unicesumar/webservicelyceum/aluno/relatorios/"]]></defaultValueExpression>
	</parameter>
	<parameter name="ra" class="java.lang.String">
		<defaultValueExpression><![CDATA[13097572]]></defaultValueExpression>
	</parameter>
	<parameter name="serie" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[3]]></defaultValueExpression>
	</parameter>
	<parameter name="unidade" class="java.lang.String">
		<defaultValueExpression><![CDATA["Cesumar"]]></defaultValueExpression>
	</parameter>
	<parameter name="curso" class="java.lang.String">
		<defaultValueExpression><![CDATA["Análise e Desenvolvimento de Sistemas"]]></defaultValueExpression>
	</parameter>
	<parameter name="departamento" class="java.lang.String">
		<defaultValueExpression><![CDATA["Exatas"]]></defaultValueExpression>
	</parameter>
	<parameter name="turma" class="java.lang.String">
		<defaultValueExpression><![CDATA["ADSIS"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     curso.unidade,
     CONCAT(departamento.nomeabreviado,' - ',departamento.nome) AS departamento,
     CONCAT(curso.codigo,' - ',curso.nome) AS curso,
     CONCAT(turma.codigo, turma.serie, '-',SUBSTRING(turma.turno, 1 ,1), '-',SUBSTRING(turma.situacao, 1,1)) AS turma_da_matricula,
     CONCAT(DATE_PART('YEAR',turma.anoinicio),'/',DATE_PART('MONTH', turma.anoinicio)) AS ano_semestre,
     CONCAT(aluno.ra, '-', aluno.nome) AS aluno,
     turma.serie
FROM
    aluno INNER JOIN curso ON aluno.idcurso = curso.id
    INNER JOIN departamento ON curso.departamento_id = curso.id
    INNER JOIN turma ON aluno.idturma = turma.id
WHERE
    aluno.ra = $P{ra}]]>
	</queryString>
	<field name="unidade" class="java.lang.String"/>
	<field name="departamento" class="java.lang.String"/>
	<field name="curso" class="java.lang.String"/>
	<field name="turma_da_matricula" class="java.lang.String"/>
	<field name="ano_semestre" class="java.lang.String"/>
	<field name="aluno" class="java.lang.String"/>
	<field name="serie" class="java.lang.Integer"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="69" splitType="Stretch">
			<rectangle>
				<reportElement x="1" y="20" width="752" height="34" uuid="f541a886-6955-4973-880b-9fea9838e250"/>
			</rectangle>
			<staticText>
				<reportElement x="555" y="0" width="196" height="20" uuid="e84edd30-9068-4928-b1bc-60ac02f6e488"/>
				<textElement>
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Médias e Faltas de Alunos]]></text>
			</staticText>
			<staticText>
				<reportElement x="3" y="23" width="40" height="12" uuid="8634b17e-0c78-42aa-8f13-ff7657f9afd7"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[UNIDADE:]]></text>
			</staticText>
			<staticText>
				<reportElement x="3" y="36" width="30" height="12" uuid="fabcad8c-50e5-49df-a622-75187a2556e2"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[DEPTO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="112" y="23" width="34" height="12" uuid="6174dbc3-7d73-4081-9e55-7b40bca1819b"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[CURSO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="112" y="36" width="62" height="12" uuid="8973dc2f-a63c-4e69-a28f-4c9714371b99"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[ANO/PERÍODO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="289" y="24" width="28" height="12" uuid="aa367699-09bc-4c65-b17f-01ecde9dca55"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[SÉRIE:]]></text>
			</staticText>
			<staticText>
				<reportElement x="289" y="35" width="39" height="12" uuid="cd3decca-fa87-4d23-88bb-db335a6491b1"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[TURMA:]]></text>
			</staticText>
			<staticText>
				<reportElement x="437" y="24" width="53" height="12" uuid="0e30ba10-fb96-486f-a698-a910ecf00e6d"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[DISCIPLINA:]]></text>
			</staticText>
			<staticText>
				<reportElement x="437" y="36" width="40" height="12" uuid="dc5016d4-e870-4158-8fa0-82f5a7495925"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[ALUNO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="613" y="24" width="46" height="12" uuid="5fba94c3-3c8c-4bc0-99cf-ba1a952e92a1"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[SITUAÇÃO:]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="64" width="752" height="1" uuid="92a4edee-0571-4ea4-9b49-eb765537a8fd"/>
				<graphicElement>
					<pen lineWidth="2.0"/>
				</graphicElement>
			</line>
		</band>
	</title>
	<pageHeader>
		<band height="88" splitType="Stretch">
			<staticText>
				<reportElement x="3" y="4" width="55" height="12" uuid="5632b02f-987c-4e8d-a477-6fc6850cd216"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[UNIDADE:]]></text>
			</staticText>
			<staticText>
				<reportElement x="3" y="20" width="97" height="12" uuid="b2b2469b-b71f-4018-ac1f-83786191d531"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[DEPARTAMENTO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="4" y="37" width="39" height="12" uuid="93bb570b-2225-475b-a9e0-cc8c3ab5c2e8"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[CURSO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="4" y="53" width="126" height="12" uuid="3dba2257-0aeb-4f82-a35f-cafbdc673dcd"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[TURMA DA MATRÍCULA:]]></text>
			</staticText>
			<staticText>
				<reportElement x="4" y="70" width="39" height="12" uuid="cee4352a-92fe-4a02-9e35-7bf7403f9dcb"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ALUNO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="250" y="53" width="87" height="12" uuid="aa5557f2-b5d2-4ac9-864f-db99cb711229"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ANO/SEMESTRE:]]></text>
			</staticText>
			<staticText>
				<reportElement x="376" y="70" width="93" height="12" uuid="0d932388-b4d5-43d8-8b02-1189642a3e6a"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ANO/SEMESTRE:]]></text>
			</staticText>
			<textField>
				<reportElement x="58" y="4" width="100" height="12" uuid="78355d3b-4f6f-412a-831c-00254d572685"/>
				<textFieldExpression><![CDATA[$F{unidade}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="100" y="20" width="455" height="12" uuid="f3ce1b30-7e10-450f-b6b3-504822267685"/>
				<textFieldExpression><![CDATA[$F{departamento}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="43" y="37" width="512" height="12" uuid="e09ea1d9-13c8-4168-b21e-f3a03166781a"/>
				<textFieldExpression><![CDATA[$F{curso}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="130" y="53" width="109" height="12" uuid="1b4de121-2759-4469-ba71-4208dd0cd839"/>
				<textFieldExpression><![CDATA[$F{turma_da_matricula}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="43" y="70" width="320" height="12" uuid="9dd399cc-5079-40fc-8beb-b5afdde2271c"/>
				<textFieldExpression><![CDATA[$F{aluno}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="469" y="70" width="46" height="12" uuid="b5f826e7-238b-4852-a99d-846d9e89dcb8"/>
				<textFieldExpression><![CDATA[$F{serie}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="337" y="53" width="100" height="12" uuid="443614fc-634d-445d-8e93-d412caa7e793"/>
				<textFieldExpression><![CDATA[$F{ano_semestre}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="108" splitType="Stretch">
			<subreport>
				<reportElement x="4" y="0" width="747" height="100" uuid="8d8d8fef-698c-4a86-9394-0370e522d750"/>
				<subreportParameter name="ra"/>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "MediasFaltasDeAlunos_detail_disciplinas.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<columnFooter>
		<band height="24" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="21" splitType="Stretch"/>
	</summary>
</jasperReport>
